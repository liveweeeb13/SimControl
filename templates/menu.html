<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimControl - Configuration</title>
    <link rel="stylesheet" href="/static/menu.css">
</head>
<body>
    <header class="cockpit-header">
        <div class="header-left">
            <div class="status-light green"></div>
            <span>SYSTEM READY</span>
        </div>
        <h1 class="cockpit-title">SimControl By liveweeeb</h1>
        <div class="header-right">
            <div class="digital-clock" id="clock"></div>
        </div>
    </header>
    
    <div class="container">
        
        <div class="menu-section">
            <h2>Configuration</h2>
            <div class="menu-buttons">
                <button onclick="exportConfig()" class="menu-btn">üì§ Export Config</button>
                <button onclick="document.getElementById('importFile').click()" class="menu-btn">üì• Import Config</button>
                <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importConfig(event)">
            </div>
        </div>

        <div class="menu-section">
            <h2>Edition</h2>
            <div class="menu-buttons">
                <button onclick="editButtons()" class="menu-btn">üéõÔ∏è Edit Buttons</button>
                <button onclick="editRules()" class="menu-btn">‚öôÔ∏è Edit Rules</button>
                <button onclick="showCredits()" class="menu-btn">‚ÑπÔ∏è Credits</button>
            </div>
        </div>

        <div class="menu-section">
            <button onclick="startSimControl()" class="start-btn">Start SimControl</button>
        </div>
    </div>

    {% if needs_update %}
    <div id="updateModal" class="modal" style="display: block;">
        <div class="modal-content update-modal">
            <h3>‚ö†Ô∏è Update Available</h3>
            <div class="update-info">
                <p><strong>Installed Version:</strong> <code>{{ current_version }}</code></p>
                <p><strong>Latest Version:</strong> <code>{{ latest_version }}</code></p>
                <p>A new version of SimControl is available!</p>
                <p>Run <code>UPDATE.exe</code> in the main directory to update.</p>
            </div>
            <div class="update-buttons">
                <button onclick="closeModal('updateModal')" class="update-btn-later">Later</button>
                <button onclick="window.open('https://github.com/liveweeeb13/SimControl/releases', '_blank')" class="update-btn-now">Update</button>
            </div>
        </div>
    </div>
    {% endif %}

    <footer class="footer">
        <p>Created with <span class="heart">‚ù§Ô∏è</span> by <strong>liveweeeb</strong> | SimControl 2026</p>
        <div class="footer-links">
            <a href="https://github.com/liveweeeb13" target="_blank">üêà GitHub</a>
            <a href="https://discord.gg/ukJegYrXWR" target="_blank">üí¨ Discord</a>
            <a href="https://id.rappytv.com/790240841598763018">üìß Contact</a>
        </div>
    </footer>

    <div id="buttonModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('buttonModal')">&times;</span>
            <h3>Edit Button</h3>
            <form id="buttonForm">
                <input type="hidden" id="buttonId">
                <label>Title: <input type="text" id="buttonTitle"></label>
                <label>Label: <input type="text" id="buttonLabel"></label>
                <label>Key: <input type="text" id="buttonKey" maxlength="1"></label>
                <label>Toggleable: <input type="checkbox" id="buttonToggleable"></label>
                <label>Color OFF: <input type="color" id="buttonColor1"></label>
                <label>Color ON: <input type="color" id="buttonColor2"></label>
                <label>Hold Time (ms): <input type="number" id="buttonHoldTime" min="0"></label>
                <div class="modal-buttons">
                    <button type="button" onclick="saveButton()">Save</button>
                    <button type="button" onclick="deleteButton()">Delete</button>
                </div>
            </form>
        </div>
    </div>

    <div id="rulesModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('rulesModal')">&times;</span>
            <h3>Edit Rules</h3>
            <div id="rulesContent"></div>
            <button onclick="addRule('autodisable')">+ Add Autodisable</button>
            <button onclick="addRule('stopmac')">+ Add Stopmac</button>
            <button onclick="saveRules()">Save Rules</button>
        </div>
    </div>

    <div id="creditsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('creditsModal')">&times;</span>
            <h3>Credits & Information</h3>
            <div class="credits-content">
                <h4>SimControl 2026</h4>
                <p>Created with ‚ù§Ô∏è by <strong>liveweeeb</strong></p>
                
                <h4>Design Help</h4>
                <ul>
                    <li>Mr_Ewann üöÇüöÉ</li>
                </ul>

                <h4>Current Version</h4>
                <ul>
                    <li>SimControl: <code>{{ current_version }}</code></li>
                </ul>
                
                <div class="credits-links">
                    <a href="https://github.com/liveweeeb" target="_blank">üêà GitHub</a>
                    <a href="https://discord.gg/yourserver" target="_blank">üí¨ Discord</a>
                    <a href="mailto:contact@liveweeeb.com">üìß Contact</a>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/config.js"></script>
    <script src="/static/menu.js"></script>
    <script>
        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString(undefined, { hour12: false });
            document.getElementById('clock').textContent = time;
        }
        setInterval(updateClock, 60);
        updateClock();
    </script>
</body>
</html>